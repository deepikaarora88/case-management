serviceMaps:
  serviceName: legal-module
  mappings:
    - version: 1.0
      description: Persists case registry data into the database
      fromTopic: save-case-registry
      isTransaction: true
      queryMaps:

        - query: "INSERT INTO eg_lm_case (caseid, tenantid, casetype, casecategory, title, description, department, courttype, courtname, nexthearingdate, workflowid,status, createdby, createdtime, lastmodifiedby, lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,?) ON CONFLICT (caseid) DO NOTHING;"
          basePath: case
          jsonMaps:
            - jsonPath: $.case.caseId
            - jsonPath: $.case.tenantId
            - jsonPath: $.case.caseType
            - jsonPath: $.case.caseCategory
            - jsonPath: $.case.title
            - jsonPath: $.case.description
            - jsonPath: $.case.department
            - jsonPath: $.case.courtType
            - jsonPath: $.case.courtName
            - jsonPath: $.case.nextHearingDate
            - jsonPath: $.case.workflow.workflowid
            - jsonPath: $.case.workflow.action
            - jsonPath: $.case.auditDetails.createdBy
            - jsonPath: $.case.auditDetails.createdTime
            - jsonPath: $.case.auditDetails.lastModifiedBy
            - jsonPath: $.case.auditDetails.lastModifiedTime


        - query: "INSERT INTO eg_lm_case_petitioner (petitionerid, caseId, name, mobileNumber,type,email, createdBy, createdTime, lastModifiedBy, lastModifiedTime) VALUES (?, ?, ?, ?, ?, ?, ?, ?,?,?) ON CONFLICT (petitionerid) DO NOTHING;"
          basePath: case.petitioners.*
          jsonMaps:
            - jsonPath: $.case.petitioners.*.petitionerId
            - jsonPath: $.case.caseId
            - jsonPath: $.case.petitioners.*.name
            - jsonPath: $.case.petitioners.*.mobileNumber
            - jsonPath: $.case.petitioners.*.type
            - jsonPath: $.case.petitioners.*.email
            - jsonPath: $.case.auditDetails.createdBy
            - jsonPath: $.case.auditDetails.createdTime
            - jsonPath: $.case.auditDetails.lastModifiedBy
            - jsonPath: $.case.auditDetails.lastModifiedTime

        - query: "INSERT INTO eg_lm_case_respondent (respondentId, caseId, name, mobileNumber, department, address, type,email, createdBy, createdTime, lastModifiedBy, lastModifiedTime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,?)  ON CONFLICT (respondentId) DO NOTHING;"
          basePath: case.respondents.*
          jsonMaps:
            - jsonPath: $.case.respondents.*.respondentId
            - jsonPath: $.case.caseId
            - jsonPath: $.case.respondents.*.name
            - jsonPath: $.case.respondents.*.mobileNumber
            - jsonPath: $.case.respondents.*.department
            - jsonPath: $.case.respondents.*.address
            - jsonPath: $.case.respondents.*.type
            - jsonPath: $.case.respondents.*.email
            - jsonPath: $.case.auditDetails.createdBy
            - jsonPath: $.case.auditDetails.createdTime
            - jsonPath: $.case.auditDetails.lastModifiedBy
            - jsonPath: $.case.auditDetails.lastModifiedTime

        - query: "INSERT INTO eg_lm_case_document (id, caseId, documentType, fileStoreId, status, createdBy, createdTime, lastModifiedBy, lastModifiedTime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?);"
          basePath: case.documents.*
          jsonMaps:
            - jsonPath: $.case.documents.*.documentUid
            - jsonPath: $.case.caseId
            - jsonPath: $.case.documents.*.documentType
            - jsonPath: $.case.documents.*.fileStoreId
            - jsonPath: $.case.documents.*.status
            - jsonPath: $.case.auditDetails.createdBy
            - jsonPath: $.case.auditDetails.createdTime
            - jsonPath: $.case.auditDetails.lastModifiedBy
            - jsonPath: $.case.auditDetails.lastModifiedTime

            
    - version: 1.0
      description: Persists case registry data into the database
      fromTopic: update-case-registry
      isTransaction: true
      queryMaps:

        - query: "INSERT INTO eg_lm_case (caseid, tenantid, casetype, casecategory, title, description, department, courttype, courtname, nexthearingdate, workflowid,status, createdby, createdtime, lastmodifiedby, lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,?) ON CONFLICT (caseid) DO NOTHING;"
          basePath: case
          jsonMaps:
            - jsonPath: $.case.caseId
            - jsonPath: $.case.tenantId
            - jsonPath: $.case.caseType
            - jsonPath: $.case.caseCategory
            - jsonPath: $.case.title
            - jsonPath: $.case.description
            - jsonPath: $.case.department
            - jsonPath: $.case.courtType
            - jsonPath: $.case.courtName
            - jsonPath: $.case.nextHearingDate
            - jsonPath: $.case.workflow.workflowid
            - jsonPath: $.case.workflow.action
            - jsonPath: $.case.auditDetails.createdBy
            - jsonPath: $.case.auditDetails.createdTime
            - jsonPath: $.case.auditDetails.lastModifiedBy
            - jsonPath: $.case.auditDetails.lastModifiedTime

        - query: "INSERT INTO eg_lm_case_advocate (caseId, advocateId, name, mobileNumber, barRegistrationNumber, role, email, isGovernmentAdvocate, createdBy, createdTime, lastModifiedBy, lastModifiedTime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);"
          basePath: case.advocates.*
          jsonMaps:
            - jsonPath: $.case.caseId
            - jsonPath: $.case.advocates.*.advocateId
            - jsonPath: $.case.advocates.*.name
            - jsonPath: $.case.advocates.*.mobileNumber
            - jsonPath: $.case.advocates.*.barRegistrationNumber
            - jsonPath: $.case.advocates.*.role
            - jsonPath: $.case.advocates.*.email
            - jsonPath: $.case.advocates.*.isGovernmentAdvocate
            - jsonPath: $.case.auditDetails.createdBy
            - jsonPath: $.case.auditDetails.createdTime
            - jsonPath: $.case.auditDetails.lastModifiedBy
            - jsonPath: $.case.auditDetails.lastModifiedTime

        - query: "INSERT INTO eg_lm_case_petitioner (petitionerid, caseId, name, mobileNumber,type,email, createdBy, createdTime, lastModifiedBy, lastModifiedTime) VALUES (?, ?, ?, ?, ?, ?, ?, ?,?,?) ON CONFLICT (petitionerid) DO NOTHING;"
          basePath: case.petitioners.*
          jsonMaps:
            - jsonPath: $.case.petitioners.*.petitionerId
            - jsonPath: $.case.caseId
            - jsonPath: $.case.petitioners.*.name
            - jsonPath: $.case.petitioners.*.mobileNumber
            - jsonPath: $.case.petitioners.*.type
            - jsonPath: $.case.petitioners.*.email
            - jsonPath: $.case.auditDetails.createdBy
            - jsonPath: $.case.auditDetails.createdTime
            - jsonPath: $.case.auditDetails.lastModifiedBy
            - jsonPath: $.case.auditDetails.lastModifiedTime

        - query: "INSERT INTO eg_lm_case_respondent (respondentId, caseId, name, mobileNumber, department, address, type,email, createdBy, createdTime, lastModifiedBy, lastModifiedTime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?,?)  ON CONFLICT (respondentId) DO NOTHING;"
          basePath: case.respondents.*
          jsonMaps:
            - jsonPath: $.case.respondents.*.respondentId
            - jsonPath: $.case.caseId
            - jsonPath: $.case.respondents.*.name
            - jsonPath: $.case.respondents.*.mobileNumber
            - jsonPath: $.case.respondents.*.department
            - jsonPath: $.case.respondents.*.address
            - jsonPath: $.case.respondents.*.type
            - jsonPath: $.case.respondents.*.email
            - jsonPath: $.case.auditDetails.createdBy
            - jsonPath: $.case.auditDetails.createdTime
            - jsonPath: $.case.auditDetails.lastModifiedBy
            - jsonPath: $.case.auditDetails.lastModifiedTime

        - query: "INSERT INTO eg_lm_case_document (id, caseId, documentType, fileStoreId, status, createdBy, createdTime, lastModifiedBy, lastModifiedTime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?);"
          basePath: case.documents.*
          jsonMaps:
            - jsonPath: $.case.documents.*.documentUid
            - jsonPath: $.case.caseId
            - jsonPath: $.case.documents.*.documentType
            - jsonPath: $.case.documents.*.fileStoreId
            - jsonPath: $.case.documents.*.status
            - jsonPath: $.case.auditDetails.createdBy
            - jsonPath: $.case.auditDetails.createdTime
            - jsonPath: $.case.auditDetails.lastModifiedBy
            - jsonPath: $.case.auditDetails.lastModifiedTime

        - query: "INSERT INTO eg_lm_judgement (judgementId, caseId, remark, orderDetail, createdBy, createdTime, lastModifiedBy, lastModifiedTime) VALUES (?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT (judgementId) DO NOTHING;"
          basePath: case.judgement
          jsonMaps:
            - jsonPath: $.case.judgement.judgementId
            - jsonPath: $.case.caseId
            - jsonPath: $.case.judgement.remark
            - jsonPath: $.case.judgement.orderDetail
            - jsonPath: $.case.auditDetails.createdBy
            - jsonPath: $.case.auditDetails.createdTime
            - jsonPath: $.case.auditDetails.lastModifiedBy
            - jsonPath: $.case.auditDetails.lastModifiedTime